<div class="container mb-4">

    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-sm h-100">
                <h4 class="card-title mt-2  text-center text-primary mb-4">Actualizar registro médico</h4>

                <div class="card-body">

                    <form [formGroup]="medicalForm" (ngSubmit)="onSubmit()">

                        <div class="row  g-2">
                            <div class="col-5">
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="nss">NSS:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('NSS')"
                                        [success]="fieldSuccessList.includes('NSS')"
                                        [error]="fieldErrorList.includes('NSS')"
                                        [warning]="fieldWarningList.includes('NSS')"
                                        [warningMessage]="getWarningMessage('NSS')">
                                    </app-field-status-indicator>
                                    <input type="text" id="nss" class="form-control" formControlName="NSS" required>
                                    <button type="button" class="btn btn-success" (click)="applyField('NSS')">Aplicar
                                    </button>
                                </div>
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="afiliacion">Afiliación:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('afiliacion')"
                                        [success]="fieldSuccessList.includes('afiliacion')"
                                        [error]="fieldErrorList.includes('afiliacion')"
                                        [warning]="fieldWarningList.includes('afiliacion')"
                                        [warningMessage]="getWarningMessage('afiliacion')">
                                    </app-field-status-indicator>
                                    <input type="text" id="afiliacion" class="form-control" formControlName="afiliacion"
                                        required>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('afiliacion')">Aplicar</button>
                                </div>
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="rh">RH:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('RH')"
                                        [success]="fieldSuccessList.includes('RH')"
                                        [error]="fieldErrorList.includes('RH')"
                                        [warning]="fieldWarningList.includes('RH')"
                                        [warningMessage]="getWarningMessage('RH')">
                                    </app-field-status-indicator>
                                    <input type="text" id="rh" formControlName="RH" class="form-control" required>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('RH')">Aplicar</button>
                                </div>
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="donador">Donador:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('donador')"
                                        [success]="fieldSuccessList.includes('donador')"
                                        [error]="fieldErrorList.includes('donador')"
                                        [warning]="fieldWarningList.includes('donador')"
                                        [warningMessage]="getWarningMessage('donador')">
                                    </app-field-status-indicator>
                                    <input type="text" id="donador" formControlName="donador" class="form-control"
                                        required>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('donador')">Aplicar</button>
                                </div>
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="peso">Peso:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('peso')"
                                        [success]="fieldSuccessList.includes('peso')"
                                        [error]="fieldErrorList.includes('peso')"
                                        [warning]="fieldWarningList.includes('peso')"
                                        [warningMessage]="getWarningMessage('peso')">
                                    </app-field-status-indicator>
                                    <input type="text" id="peso" formControlName="peso" class="form-control" required>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('peso')">Aplicar</button>
                                </div>
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="talla">Estatura:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('talla')"
                                        [success]="fieldSuccessList.includes('talla')"
                                        [error]="fieldErrorList.includes('talla')"
                                        [warning]="fieldWarningList.includes('talla')"
                                        [warningMessage]="getWarningMessage('talla')">
                                    </app-field-status-indicator>
                                    <input type="text" id="talla" formControlName="talla" class="form-control" required>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('talla')">Aplicar</button>
                                </div>
                            </div>
                            <div class="col-2">

                            </div>

                            <div class="col-5">

                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="alergias">Alergias:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('alergias')"
                                        [success]="fieldSuccessList.includes('alergias')"
                                        [error]="fieldErrorList.includes('alergias')"
                                        [warning]="fieldWarningList.includes('alergias')"
                                        [warningMessage]="getWarningMessage('alergias')">
                                    </app-field-status-indicator>
                                    <input type="text" id="alergias" formControlName="alergias" class="form-control"
                                        required>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('alergias')">Aplicar</button>
                                </div>
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="enfermedades">Enfermedades:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('enfermedades')"
                                        [success]="fieldSuccessList.includes('enfermedades')"
                                        [error]="fieldErrorList.includes('enfermedades')"
                                        [warning]="fieldWarningList.includes('enfermedades')"
                                        [warningMessage]="getWarningMessage('enfermedades')">
                                    </app-field-status-indicator>
                                    <input type="text" id="enfermedades" formControlName="enfermedades"
                                        class="form-control" required>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('enfermedades')">Aplicar</button>
                                </div>
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="tratamientos">Tratamientos:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('tratamientos')"
                                        [success]="fieldSuccessList.includes('tratamientos')"
                                        [error]="fieldErrorList.includes('tratamientos')"
                                        [warning]="fieldWarningList.includes('tratamientos')"
                                        [warningMessage]="getWarningMessage('tratamientos')">
                                    </app-field-status-indicator>
                                    <input type="text" id="tratamientos" formControlName="tratamientos"
                                        class="form-control" required>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('tratamientos')">Aplicar</button>
                                </div>
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="discapacidad">Discapacidad:</label>
                                    <app-field-status-indicator [loading]="fieldUpdatingList.includes('discapacidad')"
                                        [success]="fieldSuccessList.includes('discapacidad')"
                                        [error]="fieldErrorList.includes('discapacidad')"
                                        [warning]="fieldWarningList.includes('discapacidad')"
                                        [warningMessage]="getWarningMessage('discapacidad')">
                                    </app-field-status-indicator>
                                    <input type="text" id="discapacidad" formControlName="discapacidad"
                                        class="form-control" required>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('discapacidad')">Aplicar</button>
                                </div>
                                <div class="input-group mb-3">
                                    <label class="form-label w-100" for="enCasoDeAccidente">En caso de
                                        accidente:</label>
                                    <app-field-status-indicator
                                        [loading]="fieldUpdatingList.includes('enCasoDeAccidente')"
                                        [success]="fieldSuccessList.includes('enCasoDeAccidente')"
                                        [error]="fieldErrorList.includes('enCasoDeAccidente')"
                                        [warning]="fieldWarningList.includes('enCasoDeAccidente')"
                                        [warningMessage]="getWarningMessage('enCasoDeAccidente')">
                                    </app-field-status-indicator>
                                    <textarea type="text" id="enCasoDeAccidente" formControlName="enCasoDeAccidente"
                                        class="form-control" cols="2" required style="resize: none;"></textarea>
                                    <button type="button" class="btn btn-success"
                                        (click)="applyField('enCasoDeAccidente')">Aplicar</button>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between mt-3">
                            <button type="button" class="btn btn-outline-secondary" (click)="volver()">
                                ← Regresar
                            </button>
                            <div class="d-flex align-items-center">
                                <app-field-status-indicator [loading]="fieldUpdatingList.includes('all')"
                                    [success]="fieldSuccessList.includes('all')"
                                    [error]="fieldErrorList.includes('all')"
                                    [warning]="fieldWarningList.includes('all')"
                                    [warningMessage]="getWarningMessage('all')">
                                </app-field-status-indicator>
                                <button class="btn btn-success ms-2" type="submit">Aplicar todo</button>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>