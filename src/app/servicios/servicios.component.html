@if (showVacunas) {
<app-vacunas [vacunaNombre]="vacunaSeleccionada.nombre" [vacunaId]="vacunaSeleccionada.id"
    (volverEvent)="volverDeVacunas()">
</app-vacunas>
} @else {
<div class="container">
    <div class="row g-4">
        <!-- Columna de Consultas -->
        <div class="col-md-6">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="mb-3 text-center">
                        <i class="bi bi-chat-dots-fill me-2"></i> Consulta
                    </h5>

                    <div class="d-flex mb-3">
                        <button class="btn btn-primary me-2" (click)="mostrarFormularioConsulta()">
                            <i class="bi bi-plus-circle"></i> Agregar
                        </button>

                        <input type="text" class="form-control flex-grow-1" placeholder="Buscar por nombre..."
                            [(ngModel)]="searchTerm" (ngModelChange)="filtrarConsultas()">
                    </div>

                    @if (formularioConsultaVisible) {
                    <app-form-consulta-modal [consulta]="consultaSeleccionada" (cerrar)="cerrarFormularioConsulta()"
                        (guardar)="guardarConsulta($event)">
                    </app-form-consulta-modal>
                    }

                    <ul class="list-group flex-grow-1 overflow-auto" style="max-height: 50vh;">
                        @if (consultas && consultas.length > 0) {
                        @for (consulta of consultas; track consulta.id; let i = $index) {
                        <li class="list-group-item list-group-item-action" (click)="editarConsulta(consulta)"
                            [class.active]="consultaSeleccionada?.id === consulta.id">
                            <div class="fw-bold">{{ consulta.nombre }}</div>
                            <div class="text-muted small">
                                {{ consulta.fecha }} - {{ consulta.diagnostico }}
                            </div>
                        </li>
                        }
                        } @else {
                        <li class="list-group-item text-muted">
                            No hay consultas registradas
                        </li>
                        }
                    </ul>
                </div>
            </div>
        </div>

        <!-- Columna de Brigadas -->
        <div class="col-md-6 position-relative">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="mb-3">
                        <i class="bi bi-shield-plus me-2"></i> Brigadas
                    </h5>

                    <button class="btn btn-success mb-3" (click)="mostrarFormularioVacunas()">
                        <i class="bi bi-plus-circle"></i> Agregar
                    </button>

                    @if (formularioVacunasVisible) {
                    <app-form-vacunas-modal (cerrar)="cerrarFormularioVacunas()"></app-form-vacunas-modal>
                    }

                    <ul class="list-group flex-grow-1 overflow-auto" style="max-height: 50vh;">
                        @if (vacunas && vacunas.length > 0) {
                        @for (item of vacunas; track item.id; let i = $index) {
                        <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                            (click)="onVacunaSeleccionada(item)" [class.active]="vacunaSeleccionada?.id === item.id">
                            <div>
                                <div class="fw-bold">{{ item.nombre }}</div>
                                @if (item.fecha) {
                                <div class="text-muted small">
                                    {{ item.fecha | date:'dd/MM/yyyy' }}
                                </div>
                                }
                            </div>
                            <i class="bi bi-chevron-right"></i>
                        </li>
                        }
                        } @else {
                        <li class="list-group-item text-muted">
                            No hay resultados
                        </li>
                        }
                    </ul>

                </div>

            </div>
        </div>
    </div>
    <button class="btn btn-success position-absolute bottom-0 end-0 m-3 rounded-circle" (click)="toForms()"
        style="width: 50px; height: 50px;">
        <i class="fas fa-file-alt"></i> 
    </button>
</div>
}